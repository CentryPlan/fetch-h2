version: '3'
services:
  http1bin:
    image: kennethreitz/httpbin
    ports:
      - "80"
  http2bin:
    image: skydoctor/httpbin-http2
    ports:
      - "8000"
  https1proxy:
    image: fsouza/docker-ssl-proxy
    environment:
      DOMAIN: localhost
      TARGET_HOST: http1bin
      TARGET_PORT: 80
    links:
      - http1bin
    ports:
      - 443
    volumes:
      - "/tmp/fetch-h2-certs:/etc/nginx/certs"
# node_modules/.bin/mkcert create-ca --key /tmp/asdf/ca.key --cert /tmp/asdf/ca.crt
# node_modules/.bin/mkcert create-cert --ca-key /tmp/asdf/ca.key --ca-cert /tmp/asdf/ca.crt --key /tmp/asdf/cert.key --cert /tmp/asdf/cert.crt --domains localhost,127.0.0.1
